pipeline {
    agent any
    parameters{
        string(name:'ENV',defaultValue:'Test',description:'version to deploy')
        booleanParam(name:'ExecuteTests',defaultValue:'true',description:'testdesc')
        choice(name:'APPVERSION',choices:['1.1','2.2','3.3'])
    }
    environment{
        NEW_VERSION = '2.1'
    }
    stages {
        stage('Build') {
            steps {
                script{
                    echo "Building the code"
                    echo "Building version ${NEW_VERSION}"
                }
            }

        }
        stage('Testing') {
            when{
                expression{
                    params.ExecuteTests == true
                }
            }
            steps {
                script{
                    echo "Testing the code2"
                }
            }

        }
         stage('Package') {
            input {
                message "Select the version to package"
                ok "version selected"
                parameters {
                    choice(name:'NEWAPP',choices:['2.1','2.2','2.3'])
                }
            }
            steps {
                script{
                    echo "Packaging the code2"
                }
            }

        }
        stage('Deploy') {
            steps {
                script{
                    echo "deploying the code"
                    echo "deploying to env: ${params.ENV}"
                    echo "deploying the version: ${params.APPVERSION}"
                }
            }

        }
    }
    
}

